<!DOCTYPE html>
<html>
<head>
  <title>Табличка товарів</title>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
    }

    th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: left;
    }

    .blue-cell {
      background-color: blue;
      color: white;
      font-weight: bold;
      text-align: center;
    }

    .red-cell {
      background-color: red;
      color: white;
      font-weight: bold;
      text-align: center;
    }
  </style>
</head>
<body>
  <input type="file" id="fileInput">
  <table id="table">
    <thead>
      <tr>
        <th>Назва</th>
        <th>Ціна</th>
        <th>Поле 1</th>
        <th>Поле 2</th>
        <th>Поле 3</th>
      </tr>
    </thead>
    <tbody id="tableBody">
    </tbody>
  </table>

  <script>
    let data = [];

    function readTextFile(file) {
      const reader = new FileReader();
      reader.onload = function(event) {
        const contents = event.target.result;
        const lines = contents.split('\n');
        const tableBody = document.getElementById('tableBody');

        for (let i = 0; i < lines.length; i++) {
          const itemData = lines[i].split(',');

          if (itemData.length === 5) {
            const row = document.createElement('tr');
            for (let j = 0; j < 5; j++) {
              const cell = document.createElement('td');
              cell.textContent = itemData[j].trim();
              if (j > 1 && j < 5) {
                const value = itemData[j].trim();
                cell.classList.add(value === '1' ? 'blue-cell' : 'red-cell');
              }
              row.appendChild(cell);
            }
            tableBody.appendChild(row);
            data.push(itemData);
          }
        }

        sortTableByPrice(); // Викликати функцію сортування після заповнення таблиці
      };
      reader.readAsText(file);
    }

    function populateTable() {
      const tableBody = document.getElementById('tableBody');
      tableBody.innerHTML = '';

      for (let i = 0; i < data.length; i++) {
        const itemData = data[i];
        const row = document.createElement('tr');
        for (let j = 0; j < 5; j++) {
          const cell = document.createElement('td');
          cell.textContent = itemData[j].trim();
          if (j > 1 && j < 5) {
            const value = itemData[j].trim();
            cell.classList.add(value === '1' ? 'blue-cell' : 'red-cell');
          }
          row.appendChild(cell);
        }
        tableBody.appendChild(row);
      }
    }

    function sortTableByPrice() {
      data.sort(function(a, b) {
        return parseFloat(a[1]) - parseFloat(b[1]);
      });

      populateTable();
    }

    const fileInput = document.getElementById('fileInput');
    fileInput.addEventListener('change', (event) => {
      const file = event.target.files[0];
      readTextFile(file);
    });
  </script>
</body>
</html>
